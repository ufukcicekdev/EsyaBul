{% load static %}
<!DOCTYPE html>
<html lang="tr">
<head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-MV485Q4F');</script>
        <!-- End Google Tag Manager -->
    
	<meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{% block title %}Eşyala{% endblock %}</title>
    <meta name="description" content="{% block description %}Esyala.com, mobilya, ev dekorasyonu, elektronik ve daha fazlasını kapsayan geniş ürün yelpazesiyle online alışveriş platformudur. Kiralama ve satın alma seçenekleriyle evinizi yenilemek artık çok daha kolay!{% endblock description %}">

    <link rel="icon" href="{% static 'images/favicon.ico' %}" type="image/x-icon">
    <link rel="shortcut icon" href="{% static 'images/favicon.ico' %}" type="image/x-icon">
    <meta name="author" content="esyala.com">
    <meta name="robots" content="index,follow">
    <meta name="publisher" content="Esyala.com">
	<link rel="stylesheet" type="text/css" href="https://filestorages.fra1.cdn.digitaloceanspaces.com/esyabul/static/css/main.css">
    <link rel="stylesheet" type="text/css" href="https://filestorages.fra1.cdn.digitaloceanspaces.com/esyabul/static/css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="https://filestorages.fra1.cdn.digitaloceanspaces.com/esyabul/static/css/animate.css">
	<link rel="stylesheet" type="text/css" href="https://filestorages.fra1.cdn.digitaloceanspaces.com/esyabul/static/css/icon-fonts.css">
	<link rel="stylesheet" type="text/css" href="https://filestorages.fra1.cdn.digitaloceanspaces.com/esyabul/static/css/responsive.css">
	<link rel="stylesheet" type="text/css" href="https://filestorages.fra1.cdn.digitaloceanspaces.com/esyabul/static/css/custom.css">
    <link rel="stylesheet" type="text/css" href="https://filestorages.fra1.cdn.digitaloceanspaces.com/esyabul/static/css/bcf16bd37f5afe2e.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            var canonicalLink = document.createElement('link');
            canonicalLink.rel = 'canonical';
            canonicalLink.href = window.location.href;

            document.head.appendChild(canonicalLink);
        });
    </script>

    
    <link rel="stylesheet" type="text/css" href="https://unicons.iconscout.com/release/v3.0.6/css/line.css">
    
    <meta name="google-site-verification" content="rcp9ERDoEacGWrQI7ImCG3C9LdDj3wAO8Hn90zo3KsY" />

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-J5ZNBS7353"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-J5ZNBS7353');
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<<<<<<< HEAD
    <script src="https://www.gstatic.com/firebasejs/8.6.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.3/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.3/firebase-messaging.js"></script>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-messaging.js"></script>

<script>
  // Firebase yapılandırma ayarları
  var firebaseConfig = {
    apiKey: "AIzaSyC_qQi7TfgOv75WZ7YqNb_-4izqz7fqPa8",
    authDomain: "esyala-a8bae.firebaseapp.com",
    projectId: "esyala-a8bae",
    storageBucket: "esyala-a8bae.appspot.com",
    messagingSenderId: "695834964214",
    appId: "1:695834964214:web:31f56b6bc77038e29f3cd7",
    measurementId: "G-CWHGVYE9C6"
  };

  // Firebase'i başlat
  firebase.initializeApp(firebaseConfig);

  // Firebase Messaging nesnesi oluştur
  const messaging = firebase.messaging();

  // Token alma işlemi
  messaging.getToken({ vapidKey: 'BI_zyKhNuPkzLg25BQCSMU5Xv5MyjaUDMPy39Ex_QrX780ylj1KMpUTIadNQbz9Abw7UYYPkvH79mM5Hc95i5DU' })
    .then((currentToken) => {
      if (currentToken) {
        console.log('Token:', currentToken);
        sendTokenToServer(currentToken);  // Token'ı sunucuya gönder
      } else {
        console.log('No registration token available. Request permission to generate one.');
      }
    })
    .catch((err) => {
      console.log('An error occurred while retrieving token. ', err);
    });

  function sendTokenToServer(token) {
    const userAgent = navigator.userAgent;
    const platform = navigator.platform;
    const deviceType = /Mobi|Android/i.test(userAgent) ? 'mobile' : 'desktop';

    fetch('/save-token/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            token: token,
            user_agent: userAgent,
            platform: platform,
            device_type: deviceType
        }),
    }).then(response => {
        console.log('Token başarıyla sunucuya gönderildi.');
    }).catch((error) => {
        console.log('Token gönderimi hatası:', error);
    });
}

  function getDeviceInfo() {
    const userAgent = navigator.userAgent; // Kullanıcının cihaz ve tarayıcı bilgileri
    const platform = navigator.platform;   // İşletim sistemi bilgisi
    const isMobile = /Mobi|Android/i.test(userAgent); // Mobil cihaz olup olmadığını kontrol et
    const deviceType = isMobile ? 'Mobile' : 'Desktop'; // Cihaz türünü belirle
    return { userAgent, platform, deviceType };
  }

  // Bildirim izinlerini isteme
  messaging
    .requestPermission()
    .then(function () {
      console.log("Bildirim izni verildi.");
      return messaging.getToken();
    })
    .catch(function (err) {
      console.log("Bildirim izni alınamadı.", err);
    });

  // Mesaj alındığında yapılacaklar
  messaging.onMessage((payload) => {
    console.log('Mesaj alındı: ', payload);
  });

</script>

=======
>>>>>>> 32bf4ed8193b5c927a21ed64eff691e774831cfc


</head>

<body>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MV485Q4F"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    {% include 'message.html' %}
    {% block content %}

    {% endblock content %}
    <script type="text/javascript" src="https://filestorages.fra1.cdn.digitaloceanspaces.com/esyabul/static/js/jquery.main.js" defer></script>

    <!-- <script type="text/javascript" type="text/javascript" src="https://unpkg.com/default-passive-events" defer></script> -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" defer></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js" defer></script>
    <script type="text/javascript" src="https://filestorages.fra1.cdn.digitaloceanspaces.com/esyabul/static/js/jquery.js" defer></script>
    <script type="text/javascript" src="https://filestorages.fra1.cdn.digitaloceanspaces.com/esyabul/static/js/function.js" defer></script>
    <script type="text/javascript" src="https://filestorages.fra1.cdn.digitaloceanspaces.com/esyabul/static/js/plugins.js" defer></script>
    <script type="text/javascript" src="https://filestorages.fra1.cdn.digitaloceanspaces.com/esyabul/static/js/getpath.js" defer></script>
    <script type="text/javascript" src="https://filestorages.fra1.cdn.digitaloceanspaces.com/esyabul/static/js/main2.js" defer></script>

</body>

</html>